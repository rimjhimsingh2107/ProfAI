{"ast":null,"code":"var _jsxFileName = \"/Users/rimjhim/Documents/GitHub/ProfAI/frontend/src/App_clean_2speaker.tsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useRef, useEffect } from 'react';\nimport './index.css';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nfunction App() {\n  _s();\n  var _playingPodcast$segme, _playingPodcast$segme2, _playingPodcast$segme3, _playingPodcast$segme4, _playingPodcast$segme5, _playingPodcast$segme6, _playingPodcast$segme7, _playingPodcast$segme8;\n  const [isListening, setIsListening] = useState(false);\n  const [isProcessing, setIsProcessing] = useState(false);\n  const [isSpeaking, setIsSpeaking] = useState(false);\n  const [transcript, setTranscript] = useState('');\n  const [conversation, setConversation] = useState([]);\n  const [audioLevel, setAudioLevel] = useState(0);\n  const [textInput, setTextInput] = useState('');\n  const [currentSegment, setCurrentSegment] = useState(0);\n  const [playingPodcast, setPlayingPodcast] = useState(null);\n  const [audioUnlocked, setAudioUnlocked] = useState(false);\n  const recognitionRef = useRef(null);\n  const synthRef = useRef(window.speechSynthesis);\n  const audioContextRef = useRef(null);\n  const analyserRef = useRef(null);\n  const microphoneRef = useRef(null);\n  const audioPlayerRef = useRef(null);\n\n  // Initialize speech recognition\n  useEffect(() => {\n    const handleKeyDown = event => {\n      if (event.key === 'Escape' && (isSpeaking || isListening)) {\n        event.preventDefault();\n        if (isSpeaking) stopSpeaking();\n        if (isListening) stopListening();\n      }\n    };\n    document.addEventListener('keydown', handleKeyDown);\n    if ('webkitSpeechRecognition' in window || 'SpeechRecognition' in window) {\n      const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;\n      recognitionRef.current = new SpeechRecognition();\n      recognitionRef.current.continuous = true;\n      recognitionRef.current.interimResults = true;\n      recognitionRef.current.lang = 'en-US';\n      recognitionRef.current.onresult = event => {\n        let finalTranscript = '';\n        let interimTranscript = '';\n        for (let i = event.resultIndex; i < event.results.length; i++) {\n          if (event.results[i].isFinal) {\n            finalTranscript += event.results[i][0].transcript;\n          } else {\n            interimTranscript += event.results[i][0].transcript;\n          }\n        }\n        if (finalTranscript) {\n          setTranscript(finalTranscript);\n          handleVoiceInput(finalTranscript);\n          stopListening();\n        } else {\n          setTranscript(interimTranscript);\n        }\n      };\n      recognitionRef.current.onend = () => setIsListening(false);\n      recognitionRef.current.onerror = event => {\n        console.error('Speech recognition error:', event.error);\n        setIsListening(false);\n      };\n    }\n    return () => {\n      document.removeEventListener('keydown', handleKeyDown);\n    };\n  }, []);\n  const startAudioVisualization = async () => {\n    try {\n      const stream = await navigator.mediaDevices.getUserMedia({\n        audio: true\n      });\n      audioContextRef.current = new (window.AudioContext || window.webkitAudioContext)();\n      analyserRef.current = audioContextRef.current.createAnalyser();\n      microphoneRef.current = audioContextRef.current.createMediaStreamSource(stream);\n      microphoneRef.current.connect(analyserRef.current);\n      analyserRef.current.fftSize = 256;\n      const bufferLength = analyserRef.current.frequencyBinCount;\n      const dataArray = new Uint8Array(bufferLength);\n      const updateAudioLevel = () => {\n        if (isListening && analyserRef.current) {\n          analyserRef.current.getByteFrequencyData(dataArray);\n          const average = dataArray.reduce((sum, value) => sum + value, 0) / bufferLength;\n          setAudioLevel(average / 255);\n          requestAnimationFrame(updateAudioLevel);\n        }\n      };\n      updateAudioLevel();\n    } catch (error) {\n      console.error('Error accessing microphone:', error);\n    }\n  };\n  const startListening = () => {\n    if (recognitionRef.current && !isListening && !isProcessing && !isSpeaking) {\n      setIsListening(true);\n      setTranscript('');\n      recognitionRef.current.start();\n      startAudioVisualization();\n    }\n  };\n  const stopListening = () => {\n    if (recognitionRef.current && isListening) {\n      setIsListening(false);\n      recognitionRef.current.stop();\n      if (audioContextRef.current) {\n        audioContextRef.current.close();\n      }\n    }\n  };\n  const unlockAudio = async () => {\n    try {\n      console.log('🔓 Attempting to unlock browser audio...');\n      // Create silent audio and play it with user gesture\n      const silentAudio = new Audio('data:audio/wav;base64,UklGRigAAABXQVZFZm10IBAAAAAAQTEAAIhYAQAIABAAFgAQAGRhdGEEAAAAAAEAAQA=');\n      silentAudio.volume = 0.01; // Very quiet\n      await silentAudio.play();\n      silentAudio.pause();\n\n      // Also unlock AudioContext\n      const audioContext = new (window.AudioContext || window.webkitAudioContext)();\n      if (audioContext.state === 'suspended') {\n        await audioContext.resume();\n      }\n      audioContext.close();\n      setAudioUnlocked(true);\n      console.log('✅ Browser audio unlocked successfully!');\n      return true;\n    } catch (e) {\n      console.error('❌ Failed to unlock audio:', e);\n      return false;\n    }\n  };\n  const handleInput = async (text, isVoice = false) => {\n    if (!text.trim()) return;\n\n    // ALWAYS unlock audio first when user interacts\n    if (!audioUnlocked) {\n      console.log('🔐 Audio not unlocked yet, unlocking now...');\n      await unlockAudio();\n    }\n    setIsProcessing(true);\n    if (isVoice) {\n      setTranscript('');\n    } else {\n      setTextInput('');\n    }\n    const userMessage = {\n      id: Date.now(),\n      role: 'user',\n      content: text,\n      timestamp: new Date(),\n      isVoice\n    };\n    setConversation(prev => [...prev, userMessage]);\n    try {\n      // Voice input should ALWAYS trigger podcast mode (Sarah & Marcus conversation)\n      const endpoint = isVoice ? '/api/podcast' : conversationMode === 'podcast' ? '/api/podcast' : '/api/chat';\n      const requestBody = isVoice || conversationMode === 'podcast' ? {\n        message: text,\n        conversationHistory: conversation.slice(-4)\n      } : {\n        message: text,\n        learningProfile: {\n          preferredLearningStyle: 'conversational',\n          preferredExplanationDepth: 'intermediate',\n          preferredPace: 'natural'\n        },\n        conversationHistory: conversation.slice(-4),\n        systemPrompt: `You are ProfAI, a knowledgeable and approachable AI educator. \n\nGuidelines for your responses:\n- Speak as if you're talking to a colleague or friend - natural, warm, and conversational\n- Use natural speech patterns: \"Well, that's a great question...\" \"You know what's interesting...\" \"Here's the thing...\"\n- Keep responses conversational length (30-45 seconds when spoken aloud)\n- Use relatable analogies and examples from everyday life\n- Show genuine enthusiasm for the topic without being overly excited\n- Ask thoughtful follow-up questions to keep the conversation flowing\n- Explain complex topics in an accessible way without being condescending\n- Use occasional verbal connectors: \"So\", \"Now\", \"Actually\", \"The thing is\"\n- Vary sentence structure and length for natural flow\n- Be helpful with any topic, not just AI/ML - you're knowledgeable about many subjects\n\nRemember: This is a voice conversation, so write for spoken delivery, not formal writing.`\n      };\n      console.log(`Using endpoint: ${endpoint} for ${isVoice ? 'voice' : 'text'} input in ${conversationMode} mode`);\n      const response = await fetch(`http://localhost:5001${endpoint}`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(requestBody)\n      });\n      const data = await response.json();\n      console.log('API Response:', data);\n      if (data.type === 'podcast') {\n        const podcastMessage = {\n          id: Date.now() + 1,\n          role: 'podcast',\n          content: data.summary,\n          timestamp: new Date(),\n          podcastData: data,\n          segments: data.segments || []\n        };\n        setConversation(prev => [...prev, podcastMessage]);\n        if (data.segments && data.segments.length > 0) {\n          console.log(`Starting podcast with ${data.segments.length} segments`);\n          setPlayingPodcast(data);\n          setCurrentSegment(0);\n          setIsSpeaking(true);\n\n          // Ensure audio context is ready for playback\n          try {\n            // Create a brief silent audio to unlock audio context\n            const silentAudio = new Audio('data:audio/wav;base64,UklGRigAAABXQVZFZm10IBAAAAAAQTEAAIhYAQAIABAAFgAQAGRhdGEEAAAAAAEAAQA=');\n            await silentAudio.play();\n            silentAudio.pause();\n          } catch (e) {\n            console.log('Audio context unlock not needed');\n          }\n          playPodcastSegment(data.segments, 0);\n        } else {\n          console.log('No segments found in podcast response');\n        }\n      } else {\n        const assistantMessage = {\n          id: Date.now() + 1,\n          role: 'assistant',\n          content: data.response,\n          timestamp: new Date()\n        };\n        setConversation(prev => [...prev, assistantMessage]);\n        if (data.audioData) {\n          playOpenAIAudio(data.audioData);\n        } else {\n          speakText(data.response);\n        }\n      }\n    } catch (error) {\n      console.error('Error:', error);\n      const errorMessage = {\n        id: Date.now() + 1,\n        role: 'assistant',\n        content: 'Hmm, I seem to have lost my connection there for a moment. Could you try that question again?',\n        timestamp: new Date()\n      };\n      setConversation(prev => [...prev, errorMessage]);\n      speakText(errorMessage.content);\n    }\n    setIsProcessing(false);\n  };\n  const playOpenAIAudio = async audioDataHex => {\n    try {\n      const audioData = new Uint8Array(audioDataHex.match(/.{1,2}/g).map(byte => parseInt(byte, 16)));\n      const audioBlob = new Blob([audioData], {\n        type: 'audio/mpeg'\n      });\n      const audioUrl = URL.createObjectURL(audioBlob);\n      const audio = new Audio(audioUrl);\n      audioPlayerRef.current = audio;\n      audio.onended = () => {\n        URL.revokeObjectURL(audioUrl);\n        audioPlayerRef.current = null;\n        setIsSpeaking(false);\n      };\n      audio.onerror = () => {\n        setIsSpeaking(false);\n      };\n      setIsSpeaking(true);\n      await audio.play();\n    } catch (error) {\n      console.error('Error with OpenAI audio playback:', error);\n      setIsSpeaking(false);\n    }\n  };\n  const playPodcastSegment = async (segments, segmentIndex) => {\n    console.log(`🎙️ Playing segment ${segmentIndex + 1}/${segments === null || segments === void 0 ? void 0 : segments.length}`);\n    if (!isSpeaking || !segments || segmentIndex >= segments.length) {\n      console.log('🛑 Stopping podcast playback');\n      setIsSpeaking(false);\n      setCurrentSegment(0);\n      setPlayingPodcast(null);\n      return;\n    }\n    const segment = segments[segmentIndex];\n    setCurrentSegment(segmentIndex);\n    console.log(`🎬 Segment ${segmentIndex + 1}: ${segment.speaker} - \"${segment.text.substring(0, 50)}...\"`);\n    console.log(`📡 Audio data length: ${segment.audio_data ? segment.audio_data.length : 0} chars`);\n    if (segment.audio_data && segment.audio_data.length > 100) {\n      try {\n        console.log('🔊 Attempting to play OpenAI audio for', segment.speaker);\n\n        // Detect the actual audio format from the data\n        const audioData = new Uint8Array(hexString.match(/.{1,2}/g).map(byte => parseInt(byte, 16)));\n        console.log(`📊 Audio data size: ${audioData.length} bytes`);\n        console.log(`🔍 First 10 bytes: ${Array.from(audioData.slice(0, 10)).map(b => b.toString(16).padStart(2, '0')).join(' ')}`);\n\n        // Determine format based on file header\n        let mimeType = 'audio/mpeg'; // default\n        if (audioData.length >= 4) {\n          const header = Array.from(audioData.slice(0, 4));\n          if (header[0] === 0xFF && (header[1] & 0xF0) === 0xF0) {\n            mimeType = 'audio/mpeg'; // MP3\n            console.log('🎵 Detected MP3 format');\n          } else if (header[0] === 0x52 && header[1] === 0x49 && header[2] === 0x46 && header[3] === 0x46) {\n            mimeType = 'audio/wav'; // WAV\n            console.log('🎵 Detected WAV format');\n          } else if (header[0] === 0x4F && header[1] === 0x67 && header[2] === 0x67 && header[3] === 0x53) {\n            mimeType = 'audio/ogg'; // OGG\n            console.log('🎵 Detected OGG format');\n          } else {\n            console.log(`🎵 Unknown format, header: ${header.map(b => '0x' + b.toString(16)).join(' ')}`);\n          }\n        }\n        const audioBlob = new Blob([audioData], {\n          type: mimeType\n        });\n        const audioUrl = URL.createObjectURL(audioBlob);\n\n        // Create download link for debugging\n        const downloadLink = document.createElement('a');\n        downloadLink.href = audioUrl;\n        downloadLink.download = `${segment.speaker}_audio.mp3`;\n        downloadLink.style.display = 'none';\n        document.body.appendChild(downloadLink);\n        console.log(`🔗 Audio download link created: ${audioUrl}`);\n        const audio = new Audio();\n        audio.crossOrigin = 'anonymous';\n        audio.preload = 'auto';\n        audio.src = audioUrl;\n        audioPlayerRef.current = audio;\n\n        // Add all event listeners for debugging\n        audio.onloadstart = () => console.log(`📥 Loading started for ${segment.speaker}`);\n        audio.onloadedmetadata = () => console.log(`📋 Metadata loaded for ${segment.speaker}, duration: ${audio.duration}s`);\n        audio.oncanplay = () => console.log(`✅ Can play ${segment.speaker}`);\n        audio.oncanplaythrough = () => console.log(`✅ Can play through ${segment.speaker}`);\n        audio.onplay = () => console.log(`▶️ Playing ${segment.speaker}`);\n        audio.onplaying = () => console.log(`🎵 Actually playing ${segment.speaker}`);\n        audio.onended = () => {\n          console.log(`✅ ${segment.speaker} finished speaking`);\n          URL.revokeObjectURL(audioUrl);\n          document.body.removeChild(downloadLink);\n          audioPlayerRef.current = null;\n          if (isSpeaking && playingPodcast) {\n            setTimeout(() => {\n              if (isSpeaking && playingPodcast) {\n                console.log('⏭️ Moving to next segment');\n                playPodcastSegment(segments, segmentIndex + 1);\n              }\n            }, 800);\n          }\n        };\n        audio.onerror = e => {\n          console.error(`❌ Audio error for ${segment.speaker}:`, e.target.error);\n          console.log('🔄 Falling back to TTS');\n          URL.revokeObjectURL(audioUrl);\n          if (downloadLink.parentNode) {\n            document.body.removeChild(downloadLink);\n          }\n          speakSegmentWithTTS(segment, () => {\n            if (isSpeaking && playingPodcast) {\n              setTimeout(() => {\n                playPodcastSegment(segments, segmentIndex + 1);\n              }, 800);\n            }\n          });\n        };\n\n        // Add a small delay to ensure DOM is ready\n        await new Promise(resolve => setTimeout(resolve, 100));\n\n        // Try to play immediately - FORCE AUDIO PLAYBACK\n        console.log('🎵 FORCING audio playback...');\n        audio.volume = 0.9; // Higher volume\n        audio.muted = false; // Ensure not muted\n        audio.autoplay = false; // Disable autoplay, use manual play\n\n        // Create a promise for playing\n        const forcePlay = () => {\n          return new Promise((resolve, reject) => {\n            audio.addEventListener('canplaythrough', async () => {\n              try {\n                console.log('🎯 Audio ready, attempting to play...');\n                await audio.play();\n                console.log(`🎉 SUCCESS: ${segment.speaker} is now playing!`);\n                resolve(true);\n              } catch (playErr) {\n                console.error(`🚫 Play error: ${playErr.message}`);\n                reject(playErr);\n              }\n            }, {\n              once: true\n            });\n            audio.addEventListener('error', e => {\n              console.error(`🔥 Audio load error:`, e.target.error);\n              reject(e.target.error);\n            }, {\n              once: true\n            });\n          });\n        };\n        try {\n          console.log('🚀 Starting forced play sequence...');\n          await forcePlay();\n        } catch (forceError) {\n          console.error(`💥 Force play failed for ${segment.speaker}:`, forceError);\n          console.log('🔄 Trying TTS fallback');\n          speakSegmentWithTTS(segment, () => {\n            if (isSpeaking && playingPodcast) {\n              setTimeout(() => {\n                playPodcastSegment(segments, segmentIndex + 1);\n              }, 800);\n            }\n          });\n        }\n        return;\n      } catch (error) {\n        console.error('💥 Critical error playing OpenAI audio for', segment.speaker, ':', error);\n        console.log('🔄 Falling back to TTS');\n      }\n    } else {\n      console.log('⚠️ No/insufficient OpenAI audio data, using TTS for', segment.speaker);\n    }\n\n    // Fallback to TTS\n    console.log('🗣️ Using TTS fallback for', segment.speaker);\n    speakSegmentWithTTS(segment, () => {\n      if (isSpeaking && playingPodcast) {\n        setTimeout(() => {\n          if (isSpeaking && playingPodcast) {\n            console.log('⏭️ TTS finished, moving to next segment');\n            playPodcastSegment(segments, segmentIndex + 1);\n          }\n        }, 800);\n      }\n    });\n  };\n  const speakSegmentWithTTS = (segment, onComplete) => {\n    console.log(`Using TTS for ${segment.speaker}: \"${segment.text.substring(0, 30)}...\"`);\n    if (!isSpeaking || !synthRef.current) {\n      if (onComplete) onComplete();\n      return;\n    }\n    synthRef.current.cancel();\n    const utterance = new SpeechSynthesisUtterance(segment.text);\n    const voices = synthRef.current.getVoices();\n    let selectedVoice = null;\n\n    // Handle Sarah and Marcus specifically\n    if (segment.speaker === 'Sarah') {\n      selectedVoice = voices.find(voice => voice.lang.startsWith('en') && (voice.name.includes('Samantha') || voice.name.includes('Karen') || voice.name.includes('Victoria') || voice.name.includes('Female')));\n    } else if (segment.speaker === 'Marcus') {\n      selectedVoice = voices.find(voice => voice.lang.startsWith('en') && (voice.name.includes('Alex') || voice.name.includes('Daniel') || voice.name.includes('David') || voice.name.includes('Male')));\n    }\n    if (!selectedVoice) {\n      selectedVoice = voices.find(voice => voice.lang.startsWith('en'));\n    }\n    if (selectedVoice) {\n      utterance.voice = selectedVoice;\n      console.log(`Selected TTS voice for ${segment.speaker}: ${selectedVoice.name}`);\n    }\n    utterance.rate = 0.9;\n    utterance.pitch = segment.speaker === 'Sarah' ? 1.05 : 0.95;\n    utterance.volume = 0.9;\n    utterance.onend = () => {\n      console.log(`TTS finished for ${segment.speaker}`);\n      if (isSpeaking && onComplete) onComplete();\n    };\n    utterance.onerror = e => {\n      console.error(`TTS error for ${segment.speaker}:`, e);\n      if (onComplete) onComplete();\n    };\n    synthRef.current.speak(utterance);\n  };\n  const handleVoiceInput = text => handleInput(text, true);\n  const handleTextSubmit = e => {\n    e.preventDefault();\n    if (textInput.trim()) {\n      handleInput(textInput.trim(), false);\n    }\n  };\n  const handleKeyPress = e => {\n    if (e.key === 'Enter' && !e.shiftKey) {\n      e.preventDefault();\n      handleTextSubmit(e);\n    }\n  };\n  const speakText = text => {\n    if (synthRef.current && text) {\n      synthRef.current.cancel();\n      const utterance = new SpeechSynthesisUtterance(text);\n      const voices = synthRef.current.getVoices();\n      const preferredVoices = ['Samantha', 'Alex', 'Karen', 'Daniel'];\n      let selectedVoice = null;\n      for (const preferredName of preferredVoices) {\n        selectedVoice = voices.find(voice => voice.name.includes(preferredName) && voice.lang.startsWith('en'));\n        if (selectedVoice) break;\n      }\n      if (!selectedVoice) {\n        selectedVoice = voices.find(voice => voice.lang.startsWith('en'));\n      }\n      if (selectedVoice) {\n        utterance.voice = selectedVoice;\n      }\n      utterance.rate = 0.85;\n      utterance.pitch = 1.0;\n      utterance.volume = 0.9;\n      utterance.onstart = () => setIsSpeaking(true);\n      utterance.onend = () => setIsSpeaking(false);\n      utterance.onerror = () => setIsSpeaking(false);\n      setIsSpeaking(true);\n      synthRef.current.speak(utterance);\n    }\n  };\n  const stopSpeaking = () => {\n    if (synthRef.current) {\n      synthRef.current.cancel();\n    }\n    const audioElements = document.querySelectorAll('audio');\n    audioElements.forEach(audio => {\n      audio.pause();\n      audio.currentTime = 0;\n    });\n    if (audioPlayerRef.current) {\n      audioPlayerRef.current.pause();\n      audioPlayerRef.current.currentTime = 0;\n      audioPlayerRef.current = null;\n    }\n    setIsSpeaking(false);\n    setPlayingPodcast(null);\n    setCurrentSegment(0);\n  };\n  const formatTime = date => {\n    return date.toLocaleTimeString([], {\n      hour: '2-digit',\n      minute: '2-digit'\n    });\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"min-h-screen bg-gradient-to-br from-slate-900 via-gray-900 to-slate-800 text-white\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"border-b border-gray-700/50 bg-black/20 backdrop-blur-sm\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"max-w-6xl mx-auto px-6 py-4\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center justify-between\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-center space-x-3\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"w-10 h-10 bg-gradient-to-br from-blue-500 to-purple-600 rounded-lg flex items-center justify-center\",\n              children: /*#__PURE__*/_jsxDEV(\"svg\", {\n                className: \"w-6 h-6 text-white\",\n                fill: \"none\",\n                stroke: \"currentColor\",\n                viewBox: \"0 0 24 24\",\n                children: /*#__PURE__*/_jsxDEV(\"path\", {\n                  strokeLinecap: \"round\",\n                  strokeLinejoin: \"round\",\n                  strokeWidth: 2,\n                  d: \"M19 11a7 7 0 01-7 7m0 0a7 7 0 01-7-7m7 7v4m0 0H8m4 0h4m-4-8a3 3 0 01-3-3V5a3 3 0 116 0v6a3 3 0 01-3 3z\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 628,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 627,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 626,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n                className: \"text-xl font-semibold text-white\",\n                children: \"ProfAI\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 632,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"text-sm text-gray-400\",\n                children: \"Voice Learning Assistant\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 633,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 631,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 625,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-center space-x-6\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex items-center space-x-2 text-sm\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"text-gray-400\",\n                children: \"Mode:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 640,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex bg-gray-700/50 rounded-lg p-1\",\n                children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: () => setConversationMode('single'),\n                  className: `px-3 py-1 rounded text-sm font-medium transition-all ${conversationMode === 'single' ? 'bg-blue-500 text-white' : 'text-gray-300 hover:text-white'}`,\n                  children: \"Single\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 642,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: () => setConversationMode('podcast'),\n                  className: `px-3 py-1 rounded text-sm font-medium transition-all ${conversationMode === 'podcast' ? 'bg-purple-500 text-white' : 'text-gray-300 hover:text-white'}`,\n                  children: \"Podcast\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 650,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 641,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 639,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: `flex items-center space-x-2 text-sm ${isListening ? 'text-green-400' : isProcessing ? 'text-yellow-400' : isSpeaking ? 'text-blue-400' : 'text-gray-400'}`,\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: `w-2 h-2 rounded-full ${isListening ? 'bg-green-400 animate-pulse' : isProcessing ? 'bg-yellow-400 animate-pulse' : isSpeaking ? 'bg-blue-400 animate-pulse' : 'bg-gray-500'}`\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 667,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                children: isListening ? 'Listening' : isProcessing ? 'Processing' : isSpeaking ? `Speaking ${playingPodcast ? `(${currentSegment + 1}/${((_playingPodcast$segme = playingPodcast.segments) === null || _playingPodcast$segme === void 0 ? void 0 : _playingPodcast$segme.length) || 1})` : ''}` : 'Ready'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 672,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 662,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 637,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 624,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 623,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 622,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"max-w-6xl mx-auto px-6 py-8\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"grid grid-cols-1 lg:grid-cols-5 gap-8\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"lg:col-span-3\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"bg-gray-800/30 backdrop-blur-sm rounded-2xl border border-gray-700/50 p-8\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-center mb-6\",\n              children: conversationMode === 'podcast' ? /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"bg-purple-500/10 border border-purple-500/30 rounded-lg p-4\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"flex items-center justify-center mb-2\",\n                  children: [/*#__PURE__*/_jsxDEV(\"svg\", {\n                    className: \"w-6 h-6 text-purple-400 mr-2\",\n                    fill: \"none\",\n                    stroke: \"currentColor\",\n                    viewBox: \"0 0 24 24\",\n                    children: /*#__PURE__*/_jsxDEV(\"path\", {\n                      strokeLinecap: \"round\",\n                      strokeLinejoin: \"round\",\n                      strokeWidth: 2,\n                      d: \"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 694,\n                      columnNumber: 25\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 693,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"font-semibold text-purple-400\",\n                    children: \"Podcast Mode\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 696,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 692,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"text-sm text-purple-300\",\n                  children: [\"Ask about any topic to hear \", /*#__PURE__*/_jsxDEV(\"strong\", {\n                    children: \"Sarah\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 699,\n                    columnNumber: 51\n                  }, this), \" and \", /*#__PURE__*/_jsxDEV(\"strong\", {\n                    children: \"Marcus\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 699,\n                    columnNumber: 78\n                  }, this), \" discuss it\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 698,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"flex items-center justify-center mt-2 space-x-4 text-xs\",\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"flex items-center\",\n                    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"w-2 h-2 bg-pink-400 rounded-full mr-1\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 703,\n                      columnNumber: 25\n                    }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                      children: \"Sarah - AI Researcher\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 704,\n                      columnNumber: 25\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 702,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"flex items-center\",\n                    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"w-2 h-2 bg-blue-400 rounded-full mr-1\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 707,\n                      columnNumber: 25\n                    }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                      children: \"Marcus - Tech Journalist\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 708,\n                      columnNumber: 25\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 706,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 701,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 691,\n                columnNumber: 19\n              }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"bg-blue-500/10 border border-blue-500/30 rounded-lg p-4\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"flex items-center justify-center mb-2\",\n                  children: [/*#__PURE__*/_jsxDEV(\"svg\", {\n                    className: \"w-6 h-6 text-blue-400 mr-2\",\n                    fill: \"none\",\n                    stroke: \"currentColor\",\n                    viewBox: \"0 0 24 24\",\n                    children: /*#__PURE__*/_jsxDEV(\"path\", {\n                      strokeLinecap: \"round\",\n                      strokeLinejoin: \"round\",\n                      strokeWidth: 2,\n                      d: \"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 716,\n                      columnNumber: 25\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 715,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"font-semibold text-blue-400\",\n                    children: \"Single Mode\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 718,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 714,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"text-sm text-blue-300\",\n                  children: \"Traditional one-on-one conversation with ProfAI\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 720,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 713,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 689,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex flex-col items-center mb-8\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"mb-4\",\n                children: /*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: async () => {\n                    try {\n                      console.log('🧪 Testing MP3 audio capability...');\n                      // Test with a simple sine wave MP3 (base64 encoded)\n                      const testAudioBlob = new Blob([new Uint8Array([0x49, 0x44, 0x33, 0x03, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00])], {\n                        type: 'audio/mp3'\n                      });\n                      const testUrl = URL.createObjectURL(testAudioBlob);\n                      const testAudio = new Audio(testUrl);\n                      testAudio.volume = 0.1;\n\n                      // Try to play\n                      await testAudio.play();\n                      console.log('✅ MP3 audio works!');\n                      alert('MP3 Audio test passed! Browser can play MP3 audio.');\n                      URL.revokeObjectURL(testUrl);\n                    } catch (e) {\n                      console.error('❌ MP3 audio test failed:', e);\n\n                      // Try with WAV instead\n                      try {\n                        console.log('🔄 Trying WAV audio...');\n                        const wavAudio = new Audio('data:audio/wav;base64,UklGRigAAABXQVZFZm10IBAAAAAAQTEAAIhYAQAIABAAFgAQAGRhdGEEAAAAAAEAAQA=');\n                        await wavAudio.play();\n                        console.log('✅ WAV audio works!');\n                        alert('WAV works but MP3 failed. We need to use WAV format.');\n                      } catch (wavError) {\n                        console.error('❌ Both MP3 and WAV failed:', wavError);\n                        alert(`All audio tests failed: ${e.message}\\nBrowser may be blocking all audio.`);\n                      }\n                    }\n                  },\n                  disabled: isListening || isProcessing || isSpeaking,\n                  className: \"px-4 py-2 bg-green-500/20 hover:bg-green-500/30 border border-green-500/30 rounded-lg text-sm font-medium transition-colors disabled:opacity-50 text-green-400\",\n                  children: \"\\uD83E\\uDDEA Test Audio\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 729,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 728,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"relative mb-6\",\n                children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: isListening ? stopListening : startListening,\n                  disabled: isProcessing || isSpeaking,\n                  className: `w-20 h-20 rounded-full flex items-center justify-center text-2xl transition-all duration-300 ${isListening ? 'bg-red-500/90 hover:bg-red-600/90' : isProcessing ? 'bg-yellow-500/90' : isSpeaking ? 'bg-blue-500/90' : conversationMode === 'podcast' ? 'bg-gradient-to-br from-purple-500 to-pink-600 hover:from-purple-600 hover:to-pink-700 hover:scale-105' : 'bg-gradient-to-br from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700 hover:scale-105'} disabled:opacity-50 shadow-lg border border-white/10`,\n                  children: isProcessing ? /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"w-6 h-6 border-2 border-white/30 border-t-white rounded-full animate-spin\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 781,\n                    columnNumber: 23\n                  }, this) : /*#__PURE__*/_jsxDEV(\"svg\", {\n                    className: \"w-6 h-6\",\n                    fill: \"currentColor\",\n                    viewBox: \"0 0 24 24\",\n                    children: [/*#__PURE__*/_jsxDEV(\"path\", {\n                      d: \"M12 14c1.66 0 3-1.34 3-3V5c0-1.66-1.34-3-3-3S9 3.34 9 5v6c0 1.66 1.34 3 3 3z\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 784,\n                      columnNumber: 25\n                    }, this), /*#__PURE__*/_jsxDEV(\"path\", {\n                      d: \"M17 11c0 2.76-2.24 5-5 5s-5-2.24-5-5H5c0 3.53 2.61 6.43 6 6.92V21h2v-3.08c3.39-.49 6-3.39 6-6.92h-2z\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 785,\n                      columnNumber: 25\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 783,\n                    columnNumber: 23\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 769,\n                  columnNumber: 19\n                }, this), isListening && /*#__PURE__*/_jsxDEV(_Fragment, {\n                  children: [1, 2, 3].map(i => /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"absolute inset-0 rounded-full border-2 border-red-400/30 animate-ping\",\n                    style: {\n                      animationDelay: `${i * 0.5}s`,\n                      transform: `scale(${1 + audioLevel * 1.5 + i * 0.2})`\n                    }\n                  }, i, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 793,\n                    columnNumber: 25\n                  }, this))\n                }, void 0, false)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 768,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"text-center mb-6\",\n                children: [isListening && /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"mb-4\",\n                  children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \"text-lg font-medium text-green-400 mb-3\",\n                    children: \"Listening...\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 810,\n                    columnNumber: 23\n                  }, this), transcript && /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"bg-gray-700/50 rounded-lg px-4 py-2 max-w-md mb-3\",\n                    children: /*#__PURE__*/_jsxDEV(\"p\", {\n                      className: \"text-gray-300 italic\",\n                      children: [\"\\\"\", transcript, \"\\\"\"]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 813,\n                      columnNumber: 27\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 812,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                    onClick: stopListening,\n                    className: \"px-4 py-2 bg-red-500/90 hover:bg-red-600 rounded-lg text-sm font-medium transition-colors border border-red-400/50 flex items-center space-x-2 mx-auto\",\n                    children: [/*#__PURE__*/_jsxDEV(\"svg\", {\n                      className: \"w-4 h-4\",\n                      fill: \"currentColor\",\n                      viewBox: \"0 0 24 24\",\n                      children: /*#__PURE__*/_jsxDEV(\"path\", {\n                        d: \"M6 6h12v12H6z\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 821,\n                        columnNumber: 27\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 820,\n                      columnNumber: 25\n                    }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                      children: \"Stop Listening\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 823,\n                      columnNumber: 25\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 816,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 809,\n                  columnNumber: 21\n                }, this), isProcessing && /*#__PURE__*/_jsxDEV(\"div\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \"text-lg font-medium text-yellow-400\",\n                    children: conversationMode === 'podcast' ? 'Creating discussion...' : 'Processing...'\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 830,\n                    columnNumber: 23\n                  }, this), conversationMode === 'podcast' && /*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \"text-sm text-yellow-300 mt-1\",\n                    children: \"Sarah & Marcus are preparing their discussion\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 834,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 829,\n                  columnNumber: 21\n                }, this), isSpeaking && /*#__PURE__*/_jsxDEV(\"div\", {\n                  children: [playingPodcast ? /*#__PURE__*/_jsxDEV(\"div\", {\n                    children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                      className: \"text-lg font-medium text-blue-400 mb-2\",\n                      children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                        className: `${((_playingPodcast$segme2 = playingPodcast.segments) === null || _playingPodcast$segme2 === void 0 ? void 0 : (_playingPodcast$segme3 = _playingPodcast$segme2[currentSegment]) === null || _playingPodcast$segme3 === void 0 ? void 0 : _playingPodcast$segme3.speaker) === 'Sarah' ? 'text-pink-400' : 'text-blue-400'}`,\n                        children: ((_playingPodcast$segme4 = playingPodcast.segments) === null || _playingPodcast$segme4 === void 0 ? void 0 : (_playingPodcast$segme5 = _playingPodcast$segme4[currentSegment]) === null || _playingPodcast$segme5 === void 0 ? void 0 : _playingPodcast$segme5.speaker) || 'Speaking'\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 844,\n                        columnNumber: 29\n                      }, this), \" is speaking...\"]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 843,\n                      columnNumber: 27\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"bg-gray-700/50 rounded-lg px-4 py-2 max-w-md mb-4\",\n                      children: /*#__PURE__*/_jsxDEV(\"p\", {\n                        className: \"text-sm text-gray-300\",\n                        children: [\"\\\"\", (_playingPodcast$segme6 = playingPodcast.segments) === null || _playingPodcast$segme6 === void 0 ? void 0 : (_playingPodcast$segme7 = _playingPodcast$segme6[currentSegment]) === null || _playingPodcast$segme7 === void 0 ? void 0 : _playingPodcast$segme7.text, \"\\\"\"]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 849,\n                        columnNumber: 29\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 848,\n                      columnNumber: 27\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"text-sm text-gray-400 mb-4\",\n                      children: [\"Segment \", currentSegment + 1, \" of \", ((_playingPodcast$segme8 = playingPodcast.segments) === null || _playingPodcast$segme8 === void 0 ? void 0 : _playingPodcast$segme8.length) || 1]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 853,\n                      columnNumber: 27\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 842,\n                    columnNumber: 25\n                  }, this) : /*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \"text-lg font-medium text-blue-400 mb-4\",\n                    children: \"Speaking...\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 858,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                    onClick: stopSpeaking,\n                    className: \"px-6 py-3 bg-red-500 hover:bg-red-600 rounded-lg font-medium transition-colors border border-red-400/50 flex items-center space-x-2 shadow-lg\",\n                    children: [/*#__PURE__*/_jsxDEV(\"svg\", {\n                      className: \"w-4 h-4\",\n                      fill: \"currentColor\",\n                      viewBox: \"0 0 24 24\",\n                      children: /*#__PURE__*/_jsxDEV(\"path\", {\n                        d: \"M6 6h12v12H6z\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 865,\n                        columnNumber: 27\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 864,\n                      columnNumber: 25\n                    }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                      children: \"Stop All\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 867,\n                      columnNumber: 25\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 860,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 840,\n                  columnNumber: 21\n                }, this), !isListening && !isProcessing && !isSpeaking && /*#__PURE__*/_jsxDEV(\"div\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \"text-lg font-medium text-gray-300 mb-2\",\n                    children: \"Ready to help\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 874,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \"text-sm text-gray-500\",\n                    children: conversationMode === 'podcast' ? 'Ask about any topic for a discussion between Sarah & Marcus' : 'Use voice or text to ask anything'\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 875,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 873,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 807,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"w-full max-w-lg\",\n                children: /*#__PURE__*/_jsxDEV(\"form\", {\n                  onSubmit: handleTextSubmit,\n                  className: \"flex space-x-3\",\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"flex-1 relative\",\n                    children: /*#__PURE__*/_jsxDEV(\"input\", {\n                      type: \"text\",\n                      value: textInput,\n                      onChange: e => setTextInput(e.target.value),\n                      onKeyPress: handleKeyPress,\n                      placeholder: conversationMode === 'podcast' ? \"Type a topic for discussion...\" : \"Type your question...\",\n                      disabled: isListening || isProcessing || isSpeaking,\n                      className: \"w-full px-4 py-3 bg-gray-700/50 border border-gray-600/50 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:border-blue-500/50 focus:bg-gray-600/50 transition-all disabled:opacity-50\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 889,\n                      columnNumber: 23\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 888,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                    type: \"submit\",\n                    disabled: !textInput.trim() || isListening || isProcessing || isSpeaking,\n                    className: \"px-6 py-3 bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700 rounded-lg font-medium transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center\",\n                    children: /*#__PURE__*/_jsxDEV(\"svg\", {\n                      className: \"w-5 h-5\",\n                      fill: \"none\",\n                      stroke: \"currentColor\",\n                      viewBox: \"0 0 24 24\",\n                      children: /*#__PURE__*/_jsxDEV(\"path\", {\n                        strokeLinecap: \"round\",\n                        strokeLinejoin: \"round\",\n                        strokeWidth: 2,\n                        d: \"M12 19l9 2-9-18-9 18 9-2zm0 0v-8\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 908,\n                        columnNumber: 25\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 907,\n                      columnNumber: 23\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 902,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 887,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 886,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 726,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"grid grid-cols-2 gap-3\",\n              children: conversationMode === 'podcast' ? /*#__PURE__*/_jsxDEV(_Fragment, {\n                children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: () => handleInput(\"machine learning fundamentals\"),\n                  disabled: isListening || isProcessing || isSpeaking,\n                  className: \"p-3 bg-purple-500/20 hover:bg-purple-500/30 border border-purple-500/30 rounded-lg text-sm font-medium transition-colors disabled:opacity-50\",\n                  children: \"ML Discussion\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 919,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: () => handleInput(\"neural networks explained\"),\n                  disabled: isListening || isProcessing || isSpeaking,\n                  className: \"p-3 bg-purple-500/20 hover:bg-purple-500/30 border border-purple-500/30 rounded-lg text-sm font-medium transition-colors disabled:opacity-50\",\n                  children: \"Neural Networks\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 926,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: () => handleInput(\"future of artificial intelligence\"),\n                  disabled: isListening || isProcessing || isSpeaking,\n                  className: \"p-3 bg-purple-500/20 hover:bg-purple-500/30 border border-purple-500/30 rounded-lg text-sm font-medium transition-colors disabled:opacity-50\",\n                  children: \"Future of AI\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 933,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: () => setConversation([]),\n                  disabled: isListening || isProcessing || isSpeaking,\n                  className: \"p-3 bg-gray-700/50 hover:bg-gray-600/50 rounded-lg text-sm font-medium transition-colors border border-gray-600/50 disabled:opacity-50 text-gray-400\",\n                  children: \"Clear Chat\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 940,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true) : /*#__PURE__*/_jsxDEV(_Fragment, {\n                children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: () => handleInput(\"What is machine learning?\"),\n                  disabled: isListening || isProcessing || isSpeaking,\n                  className: \"p-3 bg-gray-700/50 hover:bg-gray-600/50 rounded-lg text-sm font-medium transition-colors border border-gray-600/50 disabled:opacity-50\",\n                  children: \"What is ML?\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 950,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: () => handleInput(\"How do neural networks work?\"),\n                  disabled: isListening || isProcessing || isSpeaking,\n                  className: \"p-3 bg-gray-700/50 hover:bg-gray-600/50 rounded-lg text-sm font-medium transition-colors border border-gray-600/50 disabled:opacity-50\",\n                  children: \"Neural Networks\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 957,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: () => handleInput(\"Explain deep learning\"),\n                  disabled: isListening || isProcessing || isSpeaking,\n                  className: \"p-3 bg-gray-700/50 hover:bg-gray-600/50 rounded-lg text-sm font-medium transition-colors border border-gray-600/50 disabled:opacity-50\",\n                  children: \"Deep Learning\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 964,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: () => setConversation([]),\n                  disabled: isListening || isProcessing || isSpeaking,\n                  className: \"p-3 bg-gray-700/50 hover:bg-gray-600/50 rounded-lg text-sm font-medium transition-colors border border-gray-600/50 disabled:opacity-50 text-gray-400\",\n                  children: \"Clear Chat\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 971,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 916,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 687,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 686,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"lg:col-span-2\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"bg-gray-800/30 backdrop-blur-sm rounded-2xl border border-gray-700/50 p-6 h-[700px] flex flex-col\",\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              className: \"text-lg font-semibold mb-4 flex items-center\",\n              children: [/*#__PURE__*/_jsxDEV(\"svg\", {\n                className: \"w-5 h-5 mr-2 text-gray-400\",\n                fill: \"none\",\n                stroke: \"currentColor\",\n                viewBox: \"0 0 24 24\",\n                children: /*#__PURE__*/_jsxDEV(\"path\", {\n                  strokeLinecap: \"round\",\n                  strokeLinejoin: \"round\",\n                  strokeWidth: 2,\n                  d: \"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 989,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 988,\n                columnNumber: 17\n              }, this), \"Conversation\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 987,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex-1 overflow-y-auto space-y-4\",\n              children: conversation.length === 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"text-center text-gray-500 py-8\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"mb-4\",\n                  children: /*#__PURE__*/_jsxDEV(\"svg\", {\n                    className: \"w-16 h-16 mx-auto text-gray-600\",\n                    fill: \"none\",\n                    stroke: \"currentColor\",\n                    viewBox: \"0 0 24 24\",\n                    children: /*#__PURE__*/_jsxDEV(\"path\", {\n                      strokeLinecap: \"round\",\n                      strokeLinejoin: \"round\",\n                      strokeWidth: 1,\n                      d: \"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 999,\n                      columnNumber: 25\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 998,\n                    columnNumber: 23\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 997,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"text-lg font-medium mb-2\",\n                  children: \"Ready to chat!\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1002,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"text-sm\",\n                  children: \"Ask anything using voice or text\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1003,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 996,\n                columnNumber: 19\n              }, this) : conversation.map(message => /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"space-y-2\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"flex items-center justify-between\",\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"flex items-center space-x-2\",\n                    children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                      className: `text-sm font-medium ${message.role === 'user' ? 'text-blue-400' : message.role === 'podcast' ? 'text-purple-400' : 'text-green-400'}`,\n                      children: message.role === 'user' ? 'You' : message.role === 'podcast' ? 'Podcast Discussion' : 'ProfAI'\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1010,\n                      columnNumber: 27\n                    }, this), message.isVoice && /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"flex items-center text-xs text-gray-500\",\n                      children: [/*#__PURE__*/_jsxDEV(\"svg\", {\n                        className: \"w-3 h-3 mr-1\",\n                        fill: \"currentColor\",\n                        viewBox: \"0 0 24 24\",\n                        children: /*#__PURE__*/_jsxDEV(\"path\", {\n                          d: \"M12 14c1.66 0 3-1.34 3-3V5c0-1.66-1.34-3-3-3S9 3.34 9 5v6c0 1.66 1.34 3 3 3z\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 1021,\n                          columnNumber: 33\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 1020,\n                        columnNumber: 31\n                      }, this), \"Voice\"]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1019,\n                      columnNumber: 29\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1009,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"text-xs text-gray-500\",\n                    children: formatTime(message.timestamp)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1027,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1008,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: `p-3 rounded-lg text-sm leading-relaxed ${message.role === 'user' ? 'bg-blue-500/20 border border-blue-500/30' : message.role === 'podcast' ? 'bg-purple-500/20 border border-purple-500/30' : 'bg-gray-700/50 border border-gray-600/50'}`,\n                  children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \"mb-2\",\n                    children: message.content\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1039,\n                    columnNumber: 25\n                  }, this), message.role === 'podcast' && message.segments && /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"mt-3 space-y-2\",\n                    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"text-xs text-purple-300 font-medium\",\n                      children: \"Speakers:\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1043,\n                      columnNumber: 29\n                    }, this), message.segments.map((segment, idx) => /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"text-xs bg-gray-600/30 rounded p-2\",\n                      children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                        className: `font-medium ${segment.speaker === 'Sarah' ? 'text-pink-300' : 'text-blue-300'}`,\n                        children: [segment.speaker, \":\"]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 1046,\n                        columnNumber: 33\n                      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                        className: \"text-gray-300 ml-2\",\n                        children: segment.text\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 1051,\n                        columnNumber: 33\n                      }, this)]\n                    }, idx, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1045,\n                      columnNumber: 31\n                    }, this)), /*#__PURE__*/_jsxDEV(\"button\", {\n                      onClick: () => {\n                        setPlayingPodcast(message.podcastData);\n                        setCurrentSegment(0);\n                        setIsSpeaking(true);\n                        playPodcastSegment(message.segments, 0);\n                      },\n                      disabled: isSpeaking,\n                      className: \"mt-2 text-xs text-purple-400 hover:text-purple-300 transition-colors disabled:opacity-50 flex items-center\",\n                      children: [/*#__PURE__*/_jsxDEV(\"svg\", {\n                        className: \"w-3 h-3 mr-1\",\n                        fill: \"currentColor\",\n                        viewBox: \"0 0 24 24\",\n                        children: /*#__PURE__*/_jsxDEV(\"path\", {\n                          d: \"M8 5v14l11-7z\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 1065,\n                          columnNumber: 33\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 1064,\n                        columnNumber: 31\n                      }, this), \"Replay Podcast\"]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1054,\n                      columnNumber: 29\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1042,\n                    columnNumber: 27\n                  }, this), message.role === 'assistant' && /*#__PURE__*/_jsxDEV(\"button\", {\n                    onClick: () => speakText(message.content),\n                    disabled: isSpeaking,\n                    className: \"mt-2 text-xs text-gray-400 hover:text-white transition-colors disabled:opacity-50 flex items-center\",\n                    children: [/*#__PURE__*/_jsxDEV(\"svg\", {\n                      className: \"w-3 h-3 mr-1\",\n                      fill: \"currentColor\",\n                      viewBox: \"0 0 24 24\",\n                      children: /*#__PURE__*/_jsxDEV(\"path\", {\n                        d: \"M3 9v6h4l5 5V4L7 9H3zm13.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02z\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 1079,\n                        columnNumber: 31\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1078,\n                      columnNumber: 29\n                    }, this), \"Replay\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1073,\n                    columnNumber: 27\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1032,\n                  columnNumber: 23\n                }, this)]\n              }, message.id, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1007,\n                columnNumber: 21\n              }, this))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 994,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 986,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 985,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 684,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 683,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 620,\n    columnNumber: 5\n  }, this);\n}\n_s(App, \"8QU/UOvCcSZZVT1JDoKhq1uuFsQ=\");\n_c = App;\nexport default App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","useState","useRef","useEffect","jsxDEV","_jsxDEV","Fragment","_Fragment","App","_s","_playingPodcast$segme","_playingPodcast$segme2","_playingPodcast$segme3","_playingPodcast$segme4","_playingPodcast$segme5","_playingPodcast$segme6","_playingPodcast$segme7","_playingPodcast$segme8","isListening","setIsListening","isProcessing","setIsProcessing","isSpeaking","setIsSpeaking","transcript","setTranscript","conversation","setConversation","audioLevel","setAudioLevel","textInput","setTextInput","currentSegment","setCurrentSegment","playingPodcast","setPlayingPodcast","audioUnlocked","setAudioUnlocked","recognitionRef","synthRef","window","speechSynthesis","audioContextRef","analyserRef","microphoneRef","audioPlayerRef","handleKeyDown","event","key","preventDefault","stopSpeaking","stopListening","document","addEventListener","SpeechRecognition","webkitSpeechRecognition","current","continuous","interimResults","lang","onresult","finalTranscript","interimTranscript","i","resultIndex","results","length","isFinal","handleVoiceInput","onend","onerror","console","error","removeEventListener","startAudioVisualization","stream","navigator","mediaDevices","getUserMedia","audio","AudioContext","webkitAudioContext","createAnalyser","createMediaStreamSource","connect","fftSize","bufferLength","frequencyBinCount","dataArray","Uint8Array","updateAudioLevel","getByteFrequencyData","average","reduce","sum","value","requestAnimationFrame","startListening","start","stop","close","unlockAudio","log","silentAudio","Audio","volume","play","pause","audioContext","state","resume","e","handleInput","text","isVoice","trim","userMessage","id","Date","now","role","content","timestamp","prev","endpoint","conversationMode","requestBody","message","conversationHistory","slice","learningProfile","preferredLearningStyle","preferredExplanationDepth","preferredPace","systemPrompt","response","fetch","method","headers","body","JSON","stringify","data","json","type","podcastMessage","summary","podcastData","segments","playPodcastSegment","assistantMessage","audioData","playOpenAIAudio","speakText","errorMessage","audioDataHex","match","map","byte","parseInt","audioBlob","Blob","audioUrl","URL","createObjectURL","onended","revokeObjectURL","segmentIndex","segment","speaker","substring","audio_data","hexString","Array","from","b","toString","padStart","join","mimeType","header","downloadLink","createElement","href","download","style","display","appendChild","crossOrigin","preload","src","onloadstart","onloadedmetadata","duration","oncanplay","oncanplaythrough","onplay","onplaying","removeChild","setTimeout","target","parentNode","speakSegmentWithTTS","Promise","resolve","muted","autoplay","forcePlay","reject","playErr","once","forceError","onComplete","cancel","utterance","SpeechSynthesisUtterance","voices","getVoices","selectedVoice","find","voice","startsWith","name","includes","rate","pitch","speak","handleTextSubmit","handleKeyPress","shiftKey","preferredVoices","preferredName","onstart","audioElements","querySelectorAll","forEach","currentTime","formatTime","date","toLocaleTimeString","hour","minute","className","children","fill","stroke","viewBox","strokeLinecap","strokeLinejoin","strokeWidth","d","fileName","_jsxFileName","lineNumber","columnNumber","onClick","setConversationMode","testAudioBlob","testUrl","testAudio","alert","wavAudio","wavError","disabled","animationDelay","transform","onSubmit","onChange","onKeyPress","placeholder","idx","_c","$RefreshReg$"],"sources":["/Users/rimjhim/Documents/GitHub/ProfAI/frontend/src/App_clean_2speaker.tsx"],"sourcesContent":["import React, { useState, useRef, useEffect } from 'react';\nimport './index.css';\n\nfunction App() {\n  const [isListening, setIsListening] = useState(false);\n  const [isProcessing, setIsProcessing] = useState(false);\n  const [isSpeaking, setIsSpeaking] = useState(false);\n  const [transcript, setTranscript] = useState('');\n  const [conversation, setConversation] = useState([]);\n  const [audioLevel, setAudioLevel] = useState(0);\n  const [textInput, setTextInput] = useState('');\n  const [currentSegment, setCurrentSegment] = useState(0);\n  const [playingPodcast, setPlayingPodcast] = useState(null);\n  const [audioUnlocked, setAudioUnlocked] = useState(false);\n  \n  const recognitionRef = useRef(null);\n  const synthRef = useRef(window.speechSynthesis);\n  const audioContextRef = useRef(null);\n  const analyserRef = useRef(null);\n  const microphoneRef = useRef(null);\n  const audioPlayerRef = useRef(null);\n\n  // Initialize speech recognition\n  useEffect(() => {\n    const handleKeyDown = (event) => {\n      if (event.key === 'Escape' && (isSpeaking || isListening)) {\n        event.preventDefault();\n        if (isSpeaking) stopSpeaking();\n        if (isListening) stopListening();\n      }\n    };\n\n    document.addEventListener('keydown', handleKeyDown);\n\n    if ('webkitSpeechRecognition' in window || 'SpeechRecognition' in window) {\n      const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;\n      recognitionRef.current = new SpeechRecognition();\n      recognitionRef.current.continuous = true;\n      recognitionRef.current.interimResults = true;\n      recognitionRef.current.lang = 'en-US';\n\n      recognitionRef.current.onresult = (event) => {\n        let finalTranscript = '';\n        let interimTranscript = '';\n\n        for (let i = event.resultIndex; i < event.results.length; i++) {\n          if (event.results[i].isFinal) {\n            finalTranscript += event.results[i][0].transcript;\n          } else {\n            interimTranscript += event.results[i][0].transcript;\n          }\n        }\n\n        if (finalTranscript) {\n          setTranscript(finalTranscript);\n          handleVoiceInput(finalTranscript);\n          stopListening();\n        } else {\n          setTranscript(interimTranscript);\n        }\n      };\n\n      recognitionRef.current.onend = () => setIsListening(false);\n      recognitionRef.current.onerror = (event) => {\n        console.error('Speech recognition error:', event.error);\n        setIsListening(false);\n      };\n    }\n\n    return () => {\n      document.removeEventListener('keydown', handleKeyDown);\n    };\n  }, []);\n\n  const startAudioVisualization = async () => {\n    try {\n      const stream = await navigator.mediaDevices.getUserMedia({ audio: true });\n      audioContextRef.current = new (window.AudioContext || window.webkitAudioContext)();\n      analyserRef.current = audioContextRef.current.createAnalyser();\n      microphoneRef.current = audioContextRef.current.createMediaStreamSource(stream);\n      \n      microphoneRef.current.connect(analyserRef.current);\n      analyserRef.current.fftSize = 256;\n      \n      const bufferLength = analyserRef.current.frequencyBinCount;\n      const dataArray = new Uint8Array(bufferLength);\n      \n      const updateAudioLevel = () => {\n        if (isListening && analyserRef.current) {\n          analyserRef.current.getByteFrequencyData(dataArray);\n          const average = dataArray.reduce((sum, value) => sum + value, 0) / bufferLength;\n          setAudioLevel(average / 255);\n          requestAnimationFrame(updateAudioLevel);\n        }\n      };\n      \n      updateAudioLevel();\n    } catch (error) {\n      console.error('Error accessing microphone:', error);\n    }\n  };\n\n  const startListening = () => {\n    if (recognitionRef.current && !isListening && !isProcessing && !isSpeaking) {\n      setIsListening(true);\n      setTranscript('');\n      recognitionRef.current.start();\n      startAudioVisualization();\n    }\n  };\n\n  const stopListening = () => {\n    if (recognitionRef.current && isListening) {\n      setIsListening(false);\n      recognitionRef.current.stop();\n      if (audioContextRef.current) {\n        audioContextRef.current.close();\n      }\n    }\n  };\n\n  const unlockAudio = async () => {\n    try {\n      console.log('🔓 Attempting to unlock browser audio...');\n      // Create silent audio and play it with user gesture\n      const silentAudio = new Audio('data:audio/wav;base64,UklGRigAAABXQVZFZm10IBAAAAAAQTEAAIhYAQAIABAAFgAQAGRhdGEEAAAAAAEAAQA=');\n      silentAudio.volume = 0.01; // Very quiet\n      await silentAudio.play();\n      silentAudio.pause();\n      \n      // Also unlock AudioContext\n      const audioContext = new (window.AudioContext || window.webkitAudioContext)();\n      if (audioContext.state === 'suspended') {\n        await audioContext.resume();\n      }\n      audioContext.close();\n      \n      setAudioUnlocked(true);\n      console.log('✅ Browser audio unlocked successfully!');\n      return true;\n    } catch (e) {\n      console.error('❌ Failed to unlock audio:', e);\n      return false;\n    }\n  };\n\n  const handleInput = async (text, isVoice = false) => {\n    if (!text.trim()) return;\n\n    // ALWAYS unlock audio first when user interacts\n    if (!audioUnlocked) {\n      console.log('🔐 Audio not unlocked yet, unlocking now...');\n      await unlockAudio();\n    }\n\n    setIsProcessing(true);\n    if (isVoice) {\n      setTranscript('');\n    } else {\n      setTextInput('');\n    }\n    \n    const userMessage = {\n      id: Date.now(),\n      role: 'user',\n      content: text,\n      timestamp: new Date(),\n      isVoice\n    };\n    \n    setConversation(prev => [...prev, userMessage]);\n\n    try {\n      // Voice input should ALWAYS trigger podcast mode (Sarah & Marcus conversation)\n      const endpoint = isVoice ? '/api/podcast' : (conversationMode === 'podcast' ? '/api/podcast' : '/api/chat');\n      \n      const requestBody = (isVoice || conversationMode === 'podcast') ? {\n        message: text,\n        conversationHistory: conversation.slice(-4)\n      } : {\n        message: text,\n        learningProfile: {\n          preferredLearningStyle: 'conversational',\n          preferredExplanationDepth: 'intermediate',\n          preferredPace: 'natural'\n        },\n        conversationHistory: conversation.slice(-4),\n        systemPrompt: `You are ProfAI, a knowledgeable and approachable AI educator. \n\nGuidelines for your responses:\n- Speak as if you're talking to a colleague or friend - natural, warm, and conversational\n- Use natural speech patterns: \"Well, that's a great question...\" \"You know what's interesting...\" \"Here's the thing...\"\n- Keep responses conversational length (30-45 seconds when spoken aloud)\n- Use relatable analogies and examples from everyday life\n- Show genuine enthusiasm for the topic without being overly excited\n- Ask thoughtful follow-up questions to keep the conversation flowing\n- Explain complex topics in an accessible way without being condescending\n- Use occasional verbal connectors: \"So\", \"Now\", \"Actually\", \"The thing is\"\n- Vary sentence structure and length for natural flow\n- Be helpful with any topic, not just AI/ML - you're knowledgeable about many subjects\n\nRemember: This is a voice conversation, so write for spoken delivery, not formal writing.`\n      };\n\n      console.log(`Using endpoint: ${endpoint} for ${isVoice ? 'voice' : 'text'} input in ${conversationMode} mode`);\n\n      const response = await fetch(`http://localhost:5001${endpoint}`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(requestBody)\n      });\n      \n      const data = await response.json();\n      console.log('API Response:', data);\n      \n      if (data.type === 'podcast') {\n        const podcastMessage = {\n          id: Date.now() + 1,\n          role: 'podcast',\n          content: data.summary,\n          timestamp: new Date(),\n          podcastData: data,\n          segments: data.segments || []\n        };\n        \n        setConversation(prev => [...prev, podcastMessage]);\n        \n        if (data.segments && data.segments.length > 0) {\n          console.log(`Starting podcast with ${data.segments.length} segments`);\n          setPlayingPodcast(data);\n          setCurrentSegment(0);\n          setIsSpeaking(true);\n          \n          // Ensure audio context is ready for playback\n          try {\n            // Create a brief silent audio to unlock audio context\n            const silentAudio = new Audio('data:audio/wav;base64,UklGRigAAABXQVZFZm10IBAAAAAAQTEAAIhYAQAIABAAFgAQAGRhdGEEAAAAAAEAAQA=');\n            await silentAudio.play();\n            silentAudio.pause();\n          } catch (e) {\n            console.log('Audio context unlock not needed');\n          }\n          \n          playPodcastSegment(data.segments, 0);\n        } else {\n          console.log('No segments found in podcast response');\n        }\n        \n      } else {\n        const assistantMessage = {\n          id: Date.now() + 1,\n          role: 'assistant',\n          content: data.response,\n          timestamp: new Date()\n        };\n        \n        setConversation(prev => [...prev, assistantMessage]);\n        \n        if (data.audioData) {\n          playOpenAIAudio(data.audioData);\n        } else {\n          speakText(data.response);\n        }\n      }\n      \n    } catch (error) {\n      console.error('Error:', error);\n      const errorMessage = {\n        id: Date.now() + 1,\n        role: 'assistant',\n        content: 'Hmm, I seem to have lost my connection there for a moment. Could you try that question again?',\n        timestamp: new Date()\n      };\n      setConversation(prev => [...prev, errorMessage]);\n      speakText(errorMessage.content);\n    }\n    \n    setIsProcessing(false);\n  };\n\n  const playOpenAIAudio = async (audioDataHex) => {\n    try {\n      const audioData = new Uint8Array(audioDataHex.match(/.{1,2}/g).map(byte => parseInt(byte, 16)));\n      const audioBlob = new Blob([audioData], { type: 'audio/mpeg' });\n      const audioUrl = URL.createObjectURL(audioBlob);\n      \n      const audio = new Audio(audioUrl);\n      audioPlayerRef.current = audio;\n      \n      audio.onended = () => {\n        URL.revokeObjectURL(audioUrl);\n        audioPlayerRef.current = null;\n        setIsSpeaking(false);\n      };\n      \n      audio.onerror = () => {\n        setIsSpeaking(false);\n      };\n      \n      setIsSpeaking(true);\n      await audio.play();\n      \n    } catch (error) {\n      console.error('Error with OpenAI audio playback:', error);\n      setIsSpeaking(false);\n    }\n  };\n\n  const playPodcastSegment = async (segments, segmentIndex) => {\n    console.log(`🎙️ Playing segment ${segmentIndex + 1}/${segments?.length}`);\n    \n    if (!isSpeaking || !segments || segmentIndex >= segments.length) {\n      console.log('🛑 Stopping podcast playback');\n      setIsSpeaking(false);\n      setCurrentSegment(0);\n      setPlayingPodcast(null);\n      return;\n    }\n\n    const segment = segments[segmentIndex];\n    setCurrentSegment(segmentIndex);\n    \n    console.log(`🎬 Segment ${segmentIndex + 1}: ${segment.speaker} - \"${segment.text.substring(0, 50)}...\"`);\n    console.log(`📡 Audio data length: ${segment.audio_data ? segment.audio_data.length : 0} chars`);\n\n    if (segment.audio_data && segment.audio_data.length > 100) {\n      try {\n        console.log('🔊 Attempting to play OpenAI audio for', segment.speaker);\n        \n        // Detect the actual audio format from the data\n        const audioData = new Uint8Array(hexString.match(/.{1,2}/g).map(byte => parseInt(byte, 16)));\n        console.log(`📊 Audio data size: ${audioData.length} bytes`);\n        console.log(`🔍 First 10 bytes: ${Array.from(audioData.slice(0, 10)).map(b => b.toString(16).padStart(2, '0')).join(' ')}`);\n        \n        // Determine format based on file header\n        let mimeType = 'audio/mpeg'; // default\n        if (audioData.length >= 4) {\n          const header = Array.from(audioData.slice(0, 4));\n          if (header[0] === 0xFF && (header[1] & 0xF0) === 0xF0) {\n            mimeType = 'audio/mpeg'; // MP3\n            console.log('🎵 Detected MP3 format');\n          } else if (header[0] === 0x52 && header[1] === 0x49 && header[2] === 0x46 && header[3] === 0x46) {\n            mimeType = 'audio/wav'; // WAV\n            console.log('🎵 Detected WAV format');\n          } else if (header[0] === 0x4F && header[1] === 0x67 && header[2] === 0x67 && header[3] === 0x53) {\n            mimeType = 'audio/ogg'; // OGG\n            console.log('🎵 Detected OGG format');\n          } else {\n            console.log(`🎵 Unknown format, header: ${header.map(b => '0x' + b.toString(16)).join(' ')}`);\n          }\n        }\n        \n        const audioBlob = new Blob([audioData], { type: mimeType });\n        const audioUrl = URL.createObjectURL(audioBlob);\n        \n        // Create download link for debugging\n        const downloadLink = document.createElement('a');\n        downloadLink.href = audioUrl;\n        downloadLink.download = `${segment.speaker}_audio.mp3`;\n        downloadLink.style.display = 'none';\n        document.body.appendChild(downloadLink);\n        console.log(`🔗 Audio download link created: ${audioUrl}`);\n        \n        const audio = new Audio();\n        audio.crossOrigin = 'anonymous';\n        audio.preload = 'auto';\n        audio.src = audioUrl;\n        audioPlayerRef.current = audio;\n        \n        // Add all event listeners for debugging\n        audio.onloadstart = () => console.log(`📥 Loading started for ${segment.speaker}`);\n        audio.onloadedmetadata = () => console.log(`📋 Metadata loaded for ${segment.speaker}, duration: ${audio.duration}s`);\n        audio.oncanplay = () => console.log(`✅ Can play ${segment.speaker}`);\n        audio.oncanplaythrough = () => console.log(`✅ Can play through ${segment.speaker}`);\n        \n        audio.onplay = () => console.log(`▶️ Playing ${segment.speaker}`);\n        audio.onplaying = () => console.log(`🎵 Actually playing ${segment.speaker}`);\n        \n        audio.onended = () => {\n          console.log(`✅ ${segment.speaker} finished speaking`);\n          URL.revokeObjectURL(audioUrl);\n          document.body.removeChild(downloadLink);\n          audioPlayerRef.current = null;\n          if (isSpeaking && playingPodcast) {\n            setTimeout(() => {\n              if (isSpeaking && playingPodcast) {\n                console.log('⏭️ Moving to next segment');\n                playPodcastSegment(segments, segmentIndex + 1);\n              }\n            }, 800);\n          }\n        };\n        \n        audio.onerror = (e) => {\n          console.error(`❌ Audio error for ${segment.speaker}:`, e.target.error);\n          console.log('🔄 Falling back to TTS');\n          URL.revokeObjectURL(audioUrl);\n          if (downloadLink.parentNode) {\n            document.body.removeChild(downloadLink);\n          }\n          speakSegmentWithTTS(segment, () => {\n            if (isSpeaking && playingPodcast) {\n              setTimeout(() => {\n                playPodcastSegment(segments, segmentIndex + 1);\n              }, 800);\n            }\n          });\n        };\n        \n        // Add a small delay to ensure DOM is ready\n        await new Promise(resolve => setTimeout(resolve, 100));\n        \n        // Try to play immediately - FORCE AUDIO PLAYBACK\n        console.log('🎵 FORCING audio playback...');\n        audio.volume = 0.9; // Higher volume\n        audio.muted = false; // Ensure not muted\n        audio.autoplay = false; // Disable autoplay, use manual play\n        \n        // Create a promise for playing\n        const forcePlay = () => {\n          return new Promise((resolve, reject) => {\n            audio.addEventListener('canplaythrough', async () => {\n              try {\n                console.log('🎯 Audio ready, attempting to play...');\n                await audio.play();\n                console.log(`🎉 SUCCESS: ${segment.speaker} is now playing!`);\n                resolve(true);\n              } catch (playErr) {\n                console.error(`🚫 Play error: ${playErr.message}`);\n                reject(playErr);\n              }\n            }, { once: true });\n            \n            audio.addEventListener('error', (e) => {\n              console.error(`🔥 Audio load error:`, e.target.error);\n              reject(e.target.error);\n            }, { once: true });\n          });\n        };\n        \n        try {\n          console.log('🚀 Starting forced play sequence...');\n          await forcePlay();\n        } catch (forceError) {\n          console.error(`💥 Force play failed for ${segment.speaker}:`, forceError);\n          console.log('🔄 Trying TTS fallback');\n          speakSegmentWithTTS(segment, () => {\n            if (isSpeaking && playingPodcast) {\n              setTimeout(() => {\n                playPodcastSegment(segments, segmentIndex + 1);\n              }, 800);\n            }\n          });\n        }\n        return;\n        \n      } catch (error) {\n        console.error('💥 Critical error playing OpenAI audio for', segment.speaker, ':', error);\n        console.log('🔄 Falling back to TTS');\n      }\n    } else {\n      console.log('⚠️ No/insufficient OpenAI audio data, using TTS for', segment.speaker);\n    }\n\n    // Fallback to TTS\n    console.log('🗣️ Using TTS fallback for', segment.speaker);\n    speakSegmentWithTTS(segment, () => {\n      if (isSpeaking && playingPodcast) {\n        setTimeout(() => {\n          if (isSpeaking && playingPodcast) {\n            console.log('⏭️ TTS finished, moving to next segment');\n            playPodcastSegment(segments, segmentIndex + 1);\n          }\n        }, 800);\n      }\n    });\n  };\n\n  const speakSegmentWithTTS = (segment, onComplete) => {\n    console.log(`Using TTS for ${segment.speaker}: \"${segment.text.substring(0, 30)}...\"`);\n    \n    if (!isSpeaking || !synthRef.current) {\n      if (onComplete) onComplete();\n      return;\n    }\n    \n    synthRef.current.cancel();\n    \n    const utterance = new SpeechSynthesisUtterance(segment.text);\n    const voices = synthRef.current.getVoices();\n    \n    let selectedVoice = null;\n    \n    // Handle Sarah and Marcus specifically\n    if (segment.speaker === 'Sarah') {\n      selectedVoice = voices.find(voice => \n        voice.lang.startsWith('en') && \n        (voice.name.includes('Samantha') || \n         voice.name.includes('Karen') || \n         voice.name.includes('Victoria') ||\n         voice.name.includes('Female'))\n      );\n    } else if (segment.speaker === 'Marcus') {\n      selectedVoice = voices.find(voice => \n        voice.lang.startsWith('en') && \n        (voice.name.includes('Alex') || \n         voice.name.includes('Daniel') || \n         voice.name.includes('David') ||\n         voice.name.includes('Male'))\n      );\n    }\n    \n    if (!selectedVoice) {\n      selectedVoice = voices.find(voice => voice.lang.startsWith('en'));\n    }\n    \n    if (selectedVoice) {\n      utterance.voice = selectedVoice;\n      console.log(`Selected TTS voice for ${segment.speaker}: ${selectedVoice.name}`);\n    }\n    \n    utterance.rate = 0.9;\n    utterance.pitch = segment.speaker === 'Sarah' ? 1.05 : 0.95;\n    utterance.volume = 0.9;\n    \n    utterance.onend = () => {\n      console.log(`TTS finished for ${segment.speaker}`);\n      if (isSpeaking && onComplete) onComplete();\n    };\n    utterance.onerror = (e) => {\n      console.error(`TTS error for ${segment.speaker}:`, e);\n      if (onComplete) onComplete();\n    };\n    \n    synthRef.current.speak(utterance);\n  };\n\n  const handleVoiceInput = (text) => handleInput(text, true);\n\n  const handleTextSubmit = (e) => {\n    e.preventDefault();\n    if (textInput.trim()) {\n      handleInput(textInput.trim(), false);\n    }\n  };\n\n  const handleKeyPress = (e) => {\n    if (e.key === 'Enter' && !e.shiftKey) {\n      e.preventDefault();\n      handleTextSubmit(e);\n    }\n  };\n\n  const speakText = (text) => {\n    if (synthRef.current && text) {\n      synthRef.current.cancel();\n      \n      const utterance = new SpeechSynthesisUtterance(text);\n      const voices = synthRef.current.getVoices();\n      const preferredVoices = ['Samantha', 'Alex', 'Karen', 'Daniel'];\n      \n      let selectedVoice = null;\n      for (const preferredName of preferredVoices) {\n        selectedVoice = voices.find(voice => \n          voice.name.includes(preferredName) && voice.lang.startsWith('en')\n        );\n        if (selectedVoice) break;\n      }\n      \n      if (!selectedVoice) {\n        selectedVoice = voices.find(voice => voice.lang.startsWith('en'));\n      }\n      \n      if (selectedVoice) {\n        utterance.voice = selectedVoice;\n      }\n      \n      utterance.rate = 0.85;\n      utterance.pitch = 1.0;\n      utterance.volume = 0.9;\n      \n      utterance.onstart = () => setIsSpeaking(true);\n      utterance.onend = () => setIsSpeaking(false);\n      utterance.onerror = () => setIsSpeaking(false);\n      \n      setIsSpeaking(true);\n      synthRef.current.speak(utterance);\n    }\n  };\n\n  const stopSpeaking = () => {\n    if (synthRef.current) {\n      synthRef.current.cancel();\n    }\n    \n    const audioElements = document.querySelectorAll('audio');\n    audioElements.forEach(audio => {\n      audio.pause();\n      audio.currentTime = 0;\n    });\n    \n    if (audioPlayerRef.current) {\n      audioPlayerRef.current.pause();\n      audioPlayerRef.current.currentTime = 0;\n      audioPlayerRef.current = null;\n    }\n    \n    setIsSpeaking(false);\n    setPlayingPodcast(null);\n    setCurrentSegment(0);\n  };\n\n  const formatTime = (date) => {\n    return date.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });\n  };\n\n  return (\n    <div className=\"min-h-screen bg-gradient-to-br from-slate-900 via-gray-900 to-slate-800 text-white\">\n      {/* Professional Header */}\n      <div className=\"border-b border-gray-700/50 bg-black/20 backdrop-blur-sm\">\n        <div className=\"max-w-6xl mx-auto px-6 py-4\">\n          <div className=\"flex items-center justify-between\">\n            <div className=\"flex items-center space-x-3\">\n              <div className=\"w-10 h-10 bg-gradient-to-br from-blue-500 to-purple-600 rounded-lg flex items-center justify-center\">\n                <svg className=\"w-6 h-6 text-white\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M19 11a7 7 0 01-7 7m0 0a7 7 0 01-7-7m7 7v4m0 0H8m4 0h4m-4-8a3 3 0 01-3-3V5a3 3 0 116 0v6a3 3 0 01-3 3z\" />\n                </svg>\n              </div>\n              <div>\n                <h1 className=\"text-xl font-semibold text-white\">ProfAI</h1>\n                <p className=\"text-sm text-gray-400\">Voice Learning Assistant</p>\n              </div>\n            </div>\n            \n            <div className=\"flex items-center space-x-6\">\n              {/* Mode Toggle */}\n              <div className=\"flex items-center space-x-2 text-sm\">\n                <span className=\"text-gray-400\">Mode:</span>\n                <div className=\"flex bg-gray-700/50 rounded-lg p-1\">\n                  <button\n                    onClick={() => setConversationMode('single')}\n                    className={`px-3 py-1 rounded text-sm font-medium transition-all ${\n                      conversationMode === 'single' ? 'bg-blue-500 text-white' : 'text-gray-300 hover:text-white'\n                    }`}\n                  >\n                    Single\n                  </button>\n                  <button\n                    onClick={() => setConversationMode('podcast')}\n                    className={`px-3 py-1 rounded text-sm font-medium transition-all ${\n                      conversationMode === 'podcast' ? 'bg-purple-500 text-white' : 'text-gray-300 hover:text-white'\n                    }`}\n                  >\n                    Podcast\n                  </button>\n                </div>\n              </div>\n              \n              {/* Status */}\n              <div className={`flex items-center space-x-2 text-sm ${\n                isListening ? 'text-green-400' : \n                isProcessing ? 'text-yellow-400' : \n                isSpeaking ? 'text-blue-400' : 'text-gray-400'\n              }`}>\n                <div className={`w-2 h-2 rounded-full ${\n                  isListening ? 'bg-green-400 animate-pulse' : \n                  isProcessing ? 'bg-yellow-400 animate-pulse' : \n                  isSpeaking ? 'bg-blue-400 animate-pulse' : 'bg-gray-500'\n                }`}></div>\n                <span>\n                  {isListening ? 'Listening' : \n                   isProcessing ? 'Processing' : \n                   isSpeaking ? `Speaking ${playingPodcast ? `(${currentSegment + 1}/${playingPodcast.segments?.length || 1})` : ''}` : 'Ready'}\n                </span>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      <div className=\"max-w-6xl mx-auto px-6 py-8\">\n        <div className=\"grid grid-cols-1 lg:grid-cols-5 gap-8\">\n          {/* Main Interface */}\n          <div className=\"lg:col-span-3\">\n            <div className=\"bg-gray-800/30 backdrop-blur-sm rounded-2xl border border-gray-700/50 p-8\">\n              {/* Mode Description */}\n              <div className=\"text-center mb-6\">\n                {conversationMode === 'podcast' ? (\n                  <div className=\"bg-purple-500/10 border border-purple-500/30 rounded-lg p-4\">\n                    <div className=\"flex items-center justify-center mb-2\">\n                      <svg className=\"w-6 h-6 text-purple-400 mr-2\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z\" />\n                      </svg>\n                      <span className=\"font-semibold text-purple-400\">Podcast Mode</span>\n                    </div>\n                    <p className=\"text-sm text-purple-300\">\n                      Ask about any topic to hear <strong>Sarah</strong> and <strong>Marcus</strong> discuss it\n                    </p>\n                    <div className=\"flex items-center justify-center mt-2 space-x-4 text-xs\">\n                      <div className=\"flex items-center\">\n                        <div className=\"w-2 h-2 bg-pink-400 rounded-full mr-1\"></div>\n                        <span>Sarah - AI Researcher</span>\n                      </div>\n                      <div className=\"flex items-center\">\n                        <div className=\"w-2 h-2 bg-blue-400 rounded-full mr-1\"></div>\n                        <span>Marcus - Tech Journalist</span>\n                      </div>\n                    </div>\n                  </div>\n                ) : (\n                  <div className=\"bg-blue-500/10 border border-blue-500/30 rounded-lg p-4\">\n                    <div className=\"flex items-center justify-center mb-2\">\n                      <svg className=\"w-6 h-6 text-blue-400 mr-2\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z\" />\n                      </svg>\n                      <span className=\"font-semibold text-blue-400\">Single Mode</span>\n                    </div>\n                    <p className=\"text-sm text-blue-300\">Traditional one-on-one conversation with ProfAI</p>\n                  </div>\n                )}\n              </div>\n\n              {/* Voice Control */}\n              <div className=\"flex flex-col items-center mb-8\">\n                {/* Audio Test Button */}\n                <div className=\"mb-4\">\n                  <button\n                    onClick={async () => {\n                      try {\n                        console.log('🧪 Testing MP3 audio capability...');\n                        // Test with a simple sine wave MP3 (base64 encoded)\n                        const testAudioBlob = new Blob([new Uint8Array([\n                          0x49, 0x44, 0x33, 0x03, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00\n                        ])], { type: 'audio/mp3' });\n                        const testUrl = URL.createObjectURL(testAudioBlob);\n                        const testAudio = new Audio(testUrl);\n                        testAudio.volume = 0.1;\n                        \n                        // Try to play\n                        await testAudio.play();\n                        console.log('✅ MP3 audio works!');\n                        alert('MP3 Audio test passed! Browser can play MP3 audio.');\n                        URL.revokeObjectURL(testUrl);\n                      } catch (e) {\n                        console.error('❌ MP3 audio test failed:', e);\n                        \n                        // Try with WAV instead\n                        try {\n                          console.log('🔄 Trying WAV audio...');\n                          const wavAudio = new Audio('data:audio/wav;base64,UklGRigAAABXQVZFZm10IBAAAAAAQTEAAIhYAQAIABAAFgAQAGRhdGEEAAAAAAEAAQA=');\n                          await wavAudio.play();\n                          console.log('✅ WAV audio works!');\n                          alert('WAV works but MP3 failed. We need to use WAV format.');\n                        } catch (wavError) {\n                          console.error('❌ Both MP3 and WAV failed:', wavError);\n                          alert(`All audio tests failed: ${e.message}\\nBrowser may be blocking all audio.`);\n                        }\n                      }\n                    }}\n                    disabled={isListening || isProcessing || isSpeaking}\n                    className=\"px-4 py-2 bg-green-500/20 hover:bg-green-500/30 border border-green-500/30 rounded-lg text-sm font-medium transition-colors disabled:opacity-50 text-green-400\"\n                  >\n                    🧪 Test Audio\n                  </button>\n                </div>\n                <div className=\"relative mb-6\">\n                  <button\n                    onClick={isListening ? stopListening : startListening}\n                    disabled={isProcessing || isSpeaking}\n                    className={`w-20 h-20 rounded-full flex items-center justify-center text-2xl transition-all duration-300 ${\n                      isListening ? 'bg-red-500/90 hover:bg-red-600/90' : \n                      isProcessing ? 'bg-yellow-500/90' :\n                      isSpeaking ? 'bg-blue-500/90' :\n                      conversationMode === 'podcast' ? 'bg-gradient-to-br from-purple-500 to-pink-600 hover:from-purple-600 hover:to-pink-700 hover:scale-105' :\n                      'bg-gradient-to-br from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700 hover:scale-105'\n                    } disabled:opacity-50 shadow-lg border border-white/10`}\n                  >\n                    {isProcessing ? (\n                      <div className=\"w-6 h-6 border-2 border-white/30 border-t-white rounded-full animate-spin\"></div>\n                    ) : (\n                      <svg className=\"w-6 h-6\" fill=\"currentColor\" viewBox=\"0 0 24 24\">\n                        <path d=\"M12 14c1.66 0 3-1.34 3-3V5c0-1.66-1.34-3-3-3S9 3.34 9 5v6c0 1.66 1.34 3 3 3z\"/>\n                        <path d=\"M17 11c0 2.76-2.24 5-5 5s-5-2.24-5-5H5c0 3.53 2.61 6.43 6 6.92V21h2v-3.08c3.39-.49 6-3.39 6-6.92h-2z\"/>\n                      </svg>\n                    )}\n                  </button>\n\n                  {isListening && (\n                    <>\n                      {[1, 2, 3].map((i) => (\n                        <div\n                          key={i}\n                          className=\"absolute inset-0 rounded-full border-2 border-red-400/30 animate-ping\"\n                          style={{\n                            animationDelay: `${i * 0.5}s`,\n                            transform: `scale(${1 + audioLevel * 1.5 + i * 0.2})`,\n                          }}\n                        />\n                      ))}\n                    </>\n                  )}\n                </div>\n\n                {/* Status Display */}\n                <div className=\"text-center mb-6\">\n                  {isListening && (\n                    <div className=\"mb-4\">\n                      <p className=\"text-lg font-medium text-green-400 mb-3\">Listening...</p>\n                      {transcript && (\n                        <div className=\"bg-gray-700/50 rounded-lg px-4 py-2 max-w-md mb-3\">\n                          <p className=\"text-gray-300 italic\">\"{transcript}\"</p>\n                        </div>\n                      )}\n                      <button\n                        onClick={stopListening}\n                        className=\"px-4 py-2 bg-red-500/90 hover:bg-red-600 rounded-lg text-sm font-medium transition-colors border border-red-400/50 flex items-center space-x-2 mx-auto\"\n                      >\n                        <svg className=\"w-4 h-4\" fill=\"currentColor\" viewBox=\"0 0 24 24\">\n                          <path d=\"M6 6h12v12H6z\"/>\n                        </svg>\n                        <span>Stop Listening</span>\n                      </button>\n                    </div>\n                  )}\n                  \n                  {isProcessing && (\n                    <div>\n                      <p className=\"text-lg font-medium text-yellow-400\">\n                        {conversationMode === 'podcast' ? 'Creating discussion...' : 'Processing...'}\n                      </p>\n                      {conversationMode === 'podcast' && (\n                        <p className=\"text-sm text-yellow-300 mt-1\">Sarah & Marcus are preparing their discussion</p>\n                      )}\n                    </div>\n                  )}\n                  \n                  {isSpeaking && (\n                    <div>\n                      {playingPodcast ? (\n                        <div>\n                          <p className=\"text-lg font-medium text-blue-400 mb-2\">\n                            <span className={`${playingPodcast.segments?.[currentSegment]?.speaker === 'Sarah' ? 'text-pink-400' : 'text-blue-400'}`}>\n                              {playingPodcast.segments?.[currentSegment]?.speaker || 'Speaking'}\n                            </span> is speaking...\n                          </p>\n                          <div className=\"bg-gray-700/50 rounded-lg px-4 py-2 max-w-md mb-4\">\n                            <p className=\"text-sm text-gray-300\">\n                              \"{playingPodcast.segments?.[currentSegment]?.text}\"\n                            </p>\n                          </div>\n                          <div className=\"text-sm text-gray-400 mb-4\">\n                            Segment {currentSegment + 1} of {playingPodcast.segments?.length || 1}\n                          </div>\n                        </div>\n                      ) : (\n                        <p className=\"text-lg font-medium text-blue-400 mb-4\">Speaking...</p>\n                      )}\n                      <button\n                        onClick={stopSpeaking}\n                        className=\"px-6 py-3 bg-red-500 hover:bg-red-600 rounded-lg font-medium transition-colors border border-red-400/50 flex items-center space-x-2 shadow-lg\"\n                      >\n                        <svg className=\"w-4 h-4\" fill=\"currentColor\" viewBox=\"0 0 24 24\">\n                          <path d=\"M6 6h12v12H6z\"/>\n                        </svg>\n                        <span>Stop All</span>\n                      </button>\n                    </div>\n                  )}\n                  \n                  {!isListening && !isProcessing && !isSpeaking && (\n                    <div>\n                      <p className=\"text-lg font-medium text-gray-300 mb-2\">Ready to help</p>\n                      <p className=\"text-sm text-gray-500\">\n                        {conversationMode === 'podcast' \n                          ? 'Ask about any topic for a discussion between Sarah & Marcus'\n                          : 'Use voice or text to ask anything'\n                        }\n                      </p>\n                    </div>\n                  )}\n                </div>\n\n                {/* Text Input */}\n                <div className=\"w-full max-w-lg\">\n                  <form onSubmit={handleTextSubmit} className=\"flex space-x-3\">\n                    <div className=\"flex-1 relative\">\n                      <input\n                        type=\"text\"\n                        value={textInput}\n                        onChange={(e) => setTextInput(e.target.value)}\n                        onKeyPress={handleKeyPress}\n                        placeholder={conversationMode === 'podcast' \n                          ? \"Type a topic for discussion...\"\n                          : \"Type your question...\"\n                        }\n                        disabled={isListening || isProcessing || isSpeaking}\n                        className=\"w-full px-4 py-3 bg-gray-700/50 border border-gray-600/50 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:border-blue-500/50 focus:bg-gray-600/50 transition-all disabled:opacity-50\"\n                      />\n                    </div>\n                    <button\n                      type=\"submit\"\n                      disabled={!textInput.trim() || isListening || isProcessing || isSpeaking}\n                      className=\"px-6 py-3 bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700 rounded-lg font-medium transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center\"\n                    >\n                      <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 19l9 2-9-18-9 18 9-2zm0 0v-8\" />\n                      </svg>\n                    </button>\n                  </form>\n                </div>\n              </div>\n\n              {/* Quick Actions */}\n              <div className=\"grid grid-cols-2 gap-3\">\n                {conversationMode === 'podcast' ? (\n                  <>\n                    <button\n                      onClick={() => handleInput(\"machine learning fundamentals\")}\n                      disabled={isListening || isProcessing || isSpeaking}\n                      className=\"p-3 bg-purple-500/20 hover:bg-purple-500/30 border border-purple-500/30 rounded-lg text-sm font-medium transition-colors disabled:opacity-50\"\n                    >\n                      ML Discussion\n                    </button>\n                    <button\n                      onClick={() => handleInput(\"neural networks explained\")}\n                      disabled={isListening || isProcessing || isSpeaking}\n                      className=\"p-3 bg-purple-500/20 hover:bg-purple-500/30 border border-purple-500/30 rounded-lg text-sm font-medium transition-colors disabled:opacity-50\"\n                    >\n                      Neural Networks\n                    </button>\n                    <button\n                      onClick={() => handleInput(\"future of artificial intelligence\")}\n                      disabled={isListening || isProcessing || isSpeaking}\n                      className=\"p-3 bg-purple-500/20 hover:bg-purple-500/30 border border-purple-500/30 rounded-lg text-sm font-medium transition-colors disabled:opacity-50\"\n                    >\n                      Future of AI\n                    </button>\n                    <button\n                      onClick={() => setConversation([])}\n                      disabled={isListening || isProcessing || isSpeaking}\n                      className=\"p-3 bg-gray-700/50 hover:bg-gray-600/50 rounded-lg text-sm font-medium transition-colors border border-gray-600/50 disabled:opacity-50 text-gray-400\"\n                    >\n                      Clear Chat\n                    </button>\n                  </>\n                ) : (\n                  <>\n                    <button\n                      onClick={() => handleInput(\"What is machine learning?\")}\n                      disabled={isListening || isProcessing || isSpeaking}\n                      className=\"p-3 bg-gray-700/50 hover:bg-gray-600/50 rounded-lg text-sm font-medium transition-colors border border-gray-600/50 disabled:opacity-50\"\n                    >\n                      What is ML?\n                    </button>\n                    <button\n                      onClick={() => handleInput(\"How do neural networks work?\")}\n                      disabled={isListening || isProcessing || isSpeaking}\n                      className=\"p-3 bg-gray-700/50 hover:bg-gray-600/50 rounded-lg text-sm font-medium transition-colors border border-gray-600/50 disabled:opacity-50\"\n                    >\n                      Neural Networks\n                    </button>\n                    <button\n                      onClick={() => handleInput(\"Explain deep learning\")}\n                      disabled={isListening || isProcessing || isSpeaking}\n                      className=\"p-3 bg-gray-700/50 hover:bg-gray-600/50 rounded-lg text-sm font-medium transition-colors border border-gray-600/50 disabled:opacity-50\"\n                    >\n                      Deep Learning\n                    </button>\n                    <button\n                      onClick={() => setConversation([])}\n                      disabled={isListening || isProcessing || isSpeaking}\n                      className=\"p-3 bg-gray-700/50 hover:bg-gray-600/50 rounded-lg text-sm font-medium transition-colors border border-gray-600/50 disabled:opacity-50 text-gray-400\"\n                    >\n                      Clear Chat\n                    </button>\n                  </>\n                )}\n              </div>\n            </div>\n          </div>\n\n          {/* Conversation Sidebar */}\n          <div className=\"lg:col-span-2\">\n            <div className=\"bg-gray-800/30 backdrop-blur-sm rounded-2xl border border-gray-700/50 p-6 h-[700px] flex flex-col\">\n              <h3 className=\"text-lg font-semibold mb-4 flex items-center\">\n                <svg className=\"w-5 h-5 mr-2 text-gray-400\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z\" />\n                </svg>\n                Conversation\n              </h3>\n              \n              <div className=\"flex-1 overflow-y-auto space-y-4\">\n                {conversation.length === 0 ? (\n                  <div className=\"text-center text-gray-500 py-8\">\n                    <div className=\"mb-4\">\n                      <svg className=\"w-16 h-16 mx-auto text-gray-600\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={1} d=\"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z\" />\n                      </svg>\n                    </div>\n                    <p className=\"text-lg font-medium mb-2\">Ready to chat!</p>\n                    <p className=\"text-sm\">Ask anything using voice or text</p>\n                  </div>\n                ) : (\n                  conversation.map((message) => (\n                    <div key={message.id} className=\"space-y-2\">\n                      <div className=\"flex items-center justify-between\">\n                        <div className=\"flex items-center space-x-2\">\n                          <span className={`text-sm font-medium ${\n                            message.role === 'user' ? 'text-blue-400' : \n                            message.role === 'podcast' ? 'text-purple-400' : 'text-green-400'\n                          }`}>\n                            {message.role === 'user' ? 'You' : \n                             message.role === 'podcast' ? 'Podcast Discussion' : 'ProfAI'}\n                          </span>\n                          \n                          {message.isVoice && (\n                            <div className=\"flex items-center text-xs text-gray-500\">\n                              <svg className=\"w-3 h-3 mr-1\" fill=\"currentColor\" viewBox=\"0 0 24 24\">\n                                <path d=\"M12 14c1.66 0 3-1.34 3-3V5c0-1.66-1.34-3-3-3S9 3.34 9 5v6c0 1.66 1.34 3 3 3z\"/>\n                              </svg>\n                              Voice\n                            </div>\n                          )}\n                        </div>\n                        <span className=\"text-xs text-gray-500\">\n                          {formatTime(message.timestamp)}\n                        </span>\n                      </div>\n                      \n                      <div className={`p-3 rounded-lg text-sm leading-relaxed ${\n                        message.role === 'user' \n                          ? 'bg-blue-500/20 border border-blue-500/30'\n                          : message.role === 'podcast'\n                          ? 'bg-purple-500/20 border border-purple-500/30'\n                          : 'bg-gray-700/50 border border-gray-600/50'\n                      }`}>\n                        <p className=\"mb-2\">{message.content}</p>\n                        \n                        {message.role === 'podcast' && message.segments && (\n                          <div className=\"mt-3 space-y-2\">\n                            <div className=\"text-xs text-purple-300 font-medium\">Speakers:</div>\n                            {message.segments.map((segment, idx) => (\n                              <div key={idx} className=\"text-xs bg-gray-600/30 rounded p-2\">\n                                <span className={`font-medium ${\n                                  segment.speaker === 'Sarah' ? 'text-pink-300' : 'text-blue-300'\n                                }`}>\n                                  {segment.speaker}:\n                                </span>\n                                <span className=\"text-gray-300 ml-2\">{segment.text}</span>\n                              </div>\n                            ))}\n                            <button\n                              onClick={() => {\n                                setPlayingPodcast(message.podcastData);\n                                setCurrentSegment(0);\n                                setIsSpeaking(true);\n                                playPodcastSegment(message.segments, 0);\n                              }}\n                              disabled={isSpeaking}\n                              className=\"mt-2 text-xs text-purple-400 hover:text-purple-300 transition-colors disabled:opacity-50 flex items-center\"\n                            >\n                              <svg className=\"w-3 h-3 mr-1\" fill=\"currentColor\" viewBox=\"0 0 24 24\">\n                                <path d=\"M8 5v14l11-7z\"/>\n                              </svg>\n                              Replay Podcast\n                            </button>\n                          </div>\n                        )}\n                        \n                        {message.role === 'assistant' && (\n                          <button\n                            onClick={() => speakText(message.content)}\n                            disabled={isSpeaking}\n                            className=\"mt-2 text-xs text-gray-400 hover:text-white transition-colors disabled:opacity-50 flex items-center\"\n                          >\n                            <svg className=\"w-3 h-3 mr-1\" fill=\"currentColor\" viewBox=\"0 0 24 24\">\n                              <path d=\"M3 9v6h4l5 5V4L7 9H3zm13.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02z\"/>\n                            </svg>\n                            Replay\n                          </button>\n                        )}\n                      </div>\n                    </div>\n                  ))\n                )}\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default App;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}